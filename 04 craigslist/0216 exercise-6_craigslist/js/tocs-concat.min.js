!function(a){jQuery.fn.toChecklist=function(b){var c=function(b,c){var d,e=function(b){b>3&&(d=a(c).attr("showSelectedItems"),a(c).attr("showSelectedItems","false"))},f=function(){a(c).attr("showSelectedItems",d)};switch(b){case"clearAll":var g="li:has(input:checked)";break;case"checkAll":var g="li:has(input:not(:checked,:disabled))";break;case"invert":var g="li:has(input)";break;default:alert("toChecklist Plugin says:\n\nWarning - Invalid action requested on checklist.\nThe action requested was: "+b)}var h=a(g,c).length;e(h),a(g,c).each(function(b){b==h-2&&h>3&&f(),a(this).trigger("click")})};if("string"==typeof b)return this.each(function(){return a(this).isChecklist()?void c(b,this):!0}),a;b=jQuery.extend({addScrollBar:!0,addSearchBox:!1,searchBoxText:"Type here to search list...",showCheckboxes:!0,showSelectedItems:!1,submitDataAsArray:!0,preferIdOverName:!0,maxNumOfSelections:-1,onMaxNumExceeded:function(){alert("You cannot select more than "+this.maxNumOfSelections+" items in this list.")},cssChecklist:"checklist",cssChecklistHighlighted:"checklistHighlighted",cssLeaveRoomForCheckbox:"leaveRoomForCheckbox",cssEven:"even",cssOdd:"odd",cssChecked:"checked",cssDisabled:"disabled",cssShowSelectedItems:"showSelectedItems",cssFocused:"focused",cssFindInList:"findInList",cssBlurred:"blurred",cssOptgroup:"optgroup"},b);{var d=function(a){alert("jQuery Plugin Error (Plugin: toChecklist)\n\n"+a)};b.addScrollBar?"overflow-y: auto; overflow-x: hidden;":"",b.showCheckboxes?"padding-left: 25px":"padding-left: 3px"}this.each(function(){var c=0,e=a(this),f=e.attr("id");if((""==f||!b.preferIdOverName)&&(f=e.attr("name").replace(/\[\]/,""),""==f))return d('Can\'t convert element to checklist.\nYour SELECT element must have a "name" attribute and/or an "id" attribute specified.'),a;var g=e.height(),h=e.width();if(h-=4,"select-multiple"!=this.type&&"select-one"!=this.type)return d('Can\'t convert element to checklist.\nExpecting SELECT element with "multiple" attribute.'),a;if("select-one"==this.type)return a;var i=function(){var d=a(this).attr("value");""==d&&(d=this.html()),d=d.replace(/ /g,"_");var e=f+"_"+d,g=a(this).html(),h="";if(a(this).attr("disabled"))var i=' disabled="disabled"',j=' class="disabled"';else{var i="",j="",h="";a(this).attr("selected")&&(-1!=b.maxNumOfSelections&&c<b.maxNumOfSelections?(h+='checked="checked"',c++):-1==b.maxNumOfSelections&&(h+='checked="checked"'))}var k=b.submitDataAsArray?"[]":"";a(this).replaceWith('<li tabindex="0"><input type="checkbox" value="'+d+'" name="'+f+k+'" id="'+e+'" '+h+i+' /><label for="'+e+'"'+j+">"+g+"</label></li>"),b.showCheckboxes===!1?a("#"+e).css("position","absolute").css("left","-50000px"):a("label[for="+e+"]").addClass(b.cssLeaveRoomForCheckbox)};a("optgroup",e).each(function(){a("option",this).each(i),a(this).replaceWith('<li class="'+b.cssOptgroup+'">'+a(this).attr("label")+"</li>"+a(this).html())}),a("option",e).each(i),a("li:first",e).each(function(){a(this).hasClass("optgroup")&&a(this).css("border-top","none")});var j=f+"_checklist";e.replaceWith('<div id="'+f+'"><div id="'+j+'"><ul>'+e.html()+"</ul></div></div>");var k="#"+j;a("#"+f).attr("showSelectedItems",b.showSelectedItems.toString()),a(k).css("position","relative");var l=0;if(b.addSearchBox){var m=function(){this.value="",a(this).removeClass(b.cssBlurred)},n=function(){this.value=this.defaultValue,a(this).addClass(b.cssBlurred)};a(k).before('<div class="findInList" id="'+f+'_findInListDiv"><input type="text" value="'+b.searchBoxText+'" id="'+f+'_findInList" class="'+b.cssBlurred+'" /></div>'),a("#"+f+"_findInList").css("width",h),a("#"+f+"_findInList").bind("focus.focusSearchBox",m).bind("blur.blurSearchBox",n).keyup(function(){var c=this;return""==this.value?(a(k).attr("scrollTop",0),a(this).unbind("keydown.tabToFocus"),!1):void a("label",k).each(function(){if(!a(this).is(":disabled")){var d=a(this).html().toLowerCase(),e=c.value.toLowerCase();if(0==d.indexOf(e)){var f=this,g=this.parentNode.offsetTop;return a(k).attr("scrollTop",g),a(c).unbind("blur.blurSearchBox").unbind("keydown.tabToFocus").bind("keydown.tabToFocus",function(d){9==d.keyCode&&(d.preventDefault(),a(f.parentNode).bind("blur.restoreDefaultText",function(){var d=a(c).attr("defaultValue");a(c).attr("value",d).addClass(b.cssBlurred).bind("blur.blurSearchBox",n),a(this).unbind("blur.restoreDefaultText")}).bind("keydown.tabBack",function(d){9==d.keyCode&&d.shiftKey&&(d.preventDefault(),a(c).unbind("focus.focusSearchBox").removeClass(b.cssBlurred).bind("focus.focusSearchBox",m).bind("blur.blurSearchBox",n).focus(),a(this).unbind("keydown.tabBack"))}).focus(),a(this).unbind("keydown.tabToFocus"))}),!1}}})}),l=a("#"+f+"_findInListDiv").height()+3}a(k).addClass(b.cssChecklist),b.addScrollBar?a(k).height(g-l).width(h):a(k).height("100%").width(h),a("ul",k).addClass(b.cssChecklist),a("li:even",k).addClass(b.cssEven),a("li:odd",k).addClass(b.cssOdd),a("li",k).focus(function(){a(this).addClass(b.cssFocused)}).blur(function(){a(this).removeClass(b.cssFocused)}),a("li",k).each(function(){a("input",this).attr("checked")&&a(this).addClass(b.cssChecked)});var o=function(){a("li",k).hasClass(b.cssChecked)?a(k).addClass(b.cssChecklistHighlighted):a(k).removeClass(b.cssChecklistHighlighted)},p=function(){"LI"==a(this).attr("tagName")&&(a(this).is("li:has(input)")?a(this).focus():a(this).next().each(p))},q=function(c){if("keydown"!=c.type||((32==c.keyCode||13==c.keyCode)&&c.preventDefault(),9!=c.keyCode||c.shiftKey?9==c.keyCode&&c.shiftKey:(c.preventDefault(),a(this).unbind("keydown.tabBack").blur().next().each(p)),32==c.keyCode)){var d=a("input:checked",k).length;if(-1!=b.maxNumOfSelections&&d>=b.maxNumOfSelections&&!a("input",this).attr("checked"))return b.onMaxNumExceeded(),void c.preventDefault();a("label",this).unbind(),"INPUT"!=c.target.tagName&&"LABEL"!=c.target.tagName&&a("input",this).trigger("click");var e=a("input",this).get(0);r(e),"true"===a("#"+f).attr("showSelectedItems")&&v()}},r=function(c){c.checked?a(c).parent().addClass(b.cssChecked):a(c).parent().removeClass(b.cssChecked),o()},s=function(){a(this).parent().focus()};a("li:has(input)",k).click(q).keydown(q),a("label",k).focus(s),a("input",k).focus(s),o();var t=function(){a("input",this).each(function(){this.checked=this.defaultChecked,r(this),b.showSelectedItems&&v()}).parent()};a("form:has(div."+b.cssChecklist+")").bind("reset.fixFormElems",t);var u="#"+f+"_selectedItems";b.showSelectedItems&&a(u).addClass(b.cssShowSelectedItems);var v=function(){a(u).html(""),a("label",k).each(function(){if(a(this).parent().hasClass(b.cssChecked)){var c=jQuery.trim(a(this).html());a(u).append("<li>"+c+"</li>")}})};b.showSelectedItems&&v()})},jQuery.fn.isChecklist=function(){var b=!1;return this.each(function(){var c=a("#"+this.id+"_checklist",this).get();return b="DIV"==this.tagName&&c,!1}),b?!0:!1}}(jQuery),function(){function a(b){return b.options.numposts?b.options.visited:b.getAllChildMarkers().every(function(b){return a(b)})}function b(a){return a.options.numposts?parseInt(a.options.numposts,10)||0:a.getAllChildMarkers().reduce(function(a,c){return a+b(c)},0)}var c,d,e,f,g,h,i=CL.favorites.isFavorite,j=$("#map"),k={},l=$("<div>"+(window.currencySymbol||"")+"</div>").text(),m=function(a){a.find(".viewcontainer").toggleClass("pics info"),a.filter(".viewcontainer").toggleClass("pics info")},n=function(a){var b=["posting","cluster"],c=b.indexOf(a);-1!==c&&(delete b[c],b=b.join(" "),f.addClass(a).removeClass(b))},o=function(){var a=$(".lbframe"),b=parseInt(a.css("top"),10),c=0,d="",e={transform:"","-webkit-transform":"","-ms-transform":""};0>b&&(c=1+2*b/a.height(),d="scale("+c+", "+c+")",Object.keys(e).forEach(function(a){e[a]=d})),a.css(e)},p=function(a){v.activeMarker=a,CL.page.isMobile?CL.lightbox(f,{afterCenter:o}):v.openPopup=L.popup({offset:new L.Point(1,-5)}).setLatLng(a.getLatLng()).setContent(f[0]).openOn(v.map)},q=function(a){CL.favorites.init(function(){r(v.activeMarker)}),a.find(".contenttoggle a").off("click touchstart").on("click touchstart",function(b){b.preventDefault(),m(a)}),CL.swipe.makeGallery(a),$(".showcontact").on("click",CL.page.showContactInfo)},r=function(a){var b=a.options;a.setIcon(v.makeIcon({visited:b.visited,num:b.numposts,text:b.numposts,posteddate:b.posteddate,fav:i(b.pid)}))},s=function(){this.title&&this.marker&&!v.openPopup?(v.openPopup=L.popup({offset:new L.Point(1,-5),closeButton:!1,autoPan:!1,isTitlePreview:!0}).setLatLng(this.marker.getLatLng()).setContent('<div style="margin: -10px 0;">'+this.title+"</div>").openOn(v.map),v.activeMarker=this.marker):v.openPopup&&v.openPopup.options.isTitlePreview&&v.openPopup._close()},t=function(a){var b=this,c=a.target,e="",f=function(a){g.html(a),n("cluster"),p(c),h.off("click").on("click",".backtolist",function(){n("cluster"),CL.lightbox.center(),CL.favorites.init(function(){r(c)})}),g.off("click").on("click",".posting",function(){var a=$(this).addClass("visited").data("id"),b=x(a);CL.jls.setItem(b.id(),1),h.html(b.dom()),n("posting"),b.buildMapBubble(function(a){h.html(a.dom()),q(h)}),CL.maps.openPopup?CL.maps.openPopup._adjustPan():CL.lightbox.center()}),CL.favorites.init(function(){r(c)})};h.addClass("iscluster");var i=window.location.search,j=b.url+i.replace("?","&"),l=this.PostingID,m=this.GeoCluster;CL.jls.setItem(m,l),c.options.visited=!0,r(c),k[j]?f(k[j]):$.getJSON(j).done(function(a){var b;a[0].forEach(function(a){a.visited=CL.jls.getItem(a.PostingID)?"visited":"",a.ImageThumb||(a.ImageThumb="/images/peace-sm.jpg"),x(a.PostingID).data(a),e+=L.Util.template(d,a)}),b=$(e),k[j]=b,f(b)})},u=function(a){var b=this.PostingID,c=x(b);c.data()||c.data(this);var d=a.target;d.options.visited=!0,r(d),h.removeClass("iscluster"),CL.jls.setItem(b,1),h.html(c.dom()),n("posting"),p(d),c.buildMapBubble(function(a){h.html(a.dom()),q(h)})},v=CL.maps,w=function(){v.openPopup&&v.openPopup._map&&v.openPopup._adjustPan()},x=function(){var a={},b=function(b){var c=b;a[c]||(a[c]={}),this.id=function(){return c}};return b.prototype.buildMapBubble=function(b){var c=a[this.id()],d=this,e=function(a){var b,c,d,e,f;if(b=a.match(/imgList\s+=\s+(\[[^\]]*\])/),b&&2===b.length)try{b=JSON.parse(b[1])}catch(g){b=[]}else b=[];return b=b.map(function(a){return a.url.replace(/600x450/,"300x300")}),c=$(a),d=c.find("#postingbody"),e=c.find(".attrgroup"),f=c.find(".bigattr"),0===d.length&&(d=c.find(".userbody")),{imgList:b,$postingBody:d,$attrs:e,$bigattr:f}};return c.data.fullyLoaded?"function"==typeof b&&b(d):$.get(c.data.PostingURL).done(function(a){var f=e(a),g=f.imgList;c.data.imgList=g,c.dom.find(".infocontainer").append(f.$attrs),c.dom.find(".infocontainer").append(f.$bigattr),c.dom.find(".infocontainer").append(f.$postingBody),g.length&&(void 0===CL.browser.ieVersion||CL.browser.ieVersion>6)?(c.dom.find(".swipe-wrap").html(g.map(function(a){return'<div><img src="'+a+'" /></div>'}).join("")),c.dom.find(".contenttoggle").show()):(c.dom.find(".swipe").remove(),m(c.dom)),c.dom.removeClass("loading"),c.data.fullyLoaded=!0,"function"==typeof b&&b(d)}),d},b.prototype.clear=function(){return a[this.id()]={},this},b.prototype.data=function(b){var c=a[this.id()];if(b){c.data=c.data||{};var d=new Date(1e3*b.PostedDate);return b.currencySymbol=l,b.hasPrice=b.Ask||0===b.Ask?"":"no",b.BedroomsContent=b.Bedrooms?b.Bedrooms+"BR":"",b.isoPostedDate=CL.util.isoDateString(d),b.humanPostedDate=d.toLocaleString(),$.extend(c.data,b),c.dom=$(L.Util.template(e,c.data)).find(".timeago").timeago().end().find(".star").data("pid",this.id()).end(),this}return c.data},b.prototype.dom=function(){var b=a[this.id()];return b.dom.clone()},function(a){return new b(a)}}(),y={},z=function(c){var d=[];$.getJSON(c,d).done(function(c){CL.when.localStorageAvailable.always(function(){var d=c[0],e=c[1],f=d.length,g=500;navigator.userAgent.match(/iPhone OS 7/)&&f>g&&(d.length=f=g);var h,i=0,k=CL.page.isMobile?64:32,m=10,n=0,o=CL.cookies.getItem("cl_map");if(o){var p=o.split(","),q=new L.LatLng(p[1],p[0]),x=new L.LatLng(p[3],p[2]);h=new L.LatLngBounds(q,x)}var z=function(a,b){return b=b||[],a._markers.forEach(function(a){b.push(a.options.posteddate)}),a._childClusters.forEach(function(a){z(a,b)}),b};v.markers=new L.MarkerClusterGroup({zoomToBoundsOnClick:!1,spiderifyOnMaxZoom:!1,showCoverageOnHover:!1,maxClusterRadius:k,disableClusteringAtZoom:17,iconCreateFunction:function(c){var d=Math.max.apply(null,z(c)),e=b(c);return v.makeIcon({num:e,text:e,visited:a(c),posteddate:d,cluster:!0,fav:!1})}});for(var A=0,B=[],C=0;f>C;C++){var D,E,F=d[C];if(F.NumPosts>1)D=CL.jls.getItem(F.GeoCluster)==F.PostingID,E=new L.Marker(new L.LatLng(F.Latitude,F.Longitude),{visited:D,numposts:F.NumPosts,posteddate:1e3*F.PostedDate}),E.on("click",t,F),A+=Number(F.NumPosts);else{var G=F.Ask||F.Ask?'<span class="price">'+l+F.Ask+"</span> - ":"";G+=F.PostingTitle,D=null!==CL.jls.getItem(F.PostingID),E=new L.Marker(new L.LatLng(F.Latitude,F.Longitude),{pid:F.PostingID,visited:D,numposts:1,posteddate:1e3*F.PostedDate}),E.on("click",u,F).on("mouseover",s,{title:G,marker:E}).on("mouseout",s),A++}r(E),h&&h.contains(E.getLatLng())&&n++,y[F.PostingID]=E,B.push(E),i++}v.markers.addLayers(B),$(".resulttotal .displaycount").text(A);var H=$("#mapcontainer");if(0===i){var I=$("#noresult_overlay, #noresult_text");I.css("line-height",H.height()+"px").addClass("visible").on("click",function(){I.removeClass("visible")})}var J=$("#mapcontainer"),K=new L.LatLng(J.data("arealat"),J.data("arealon"));if(f>0){var M=e.clat,N=e.clng;K=new L.LatLng(M,N);var O=e.zoom;m=i>1?O:15,m>17&&(m=17)}if(v.map)v.map.setView(K,m);else{v.map=new L.Map("map",{center:K,zoom:m,minZoom:1,maxZoom:17,maxBounds:[[-90,-180],[90,180]],layers:[v.tilelayer],zoomControl:!1});var P=new L.Control.ZoomFS;v.map.addControl(P),$(".closeFS").on("click",function(){P.fullscreen()});var Q=L.control.scale({metric:"US"!==window.areaCountry,imperial:"US"===window.areaCountry,updateWhenIdle:!0});v.map.addControl(Q),v.map.attributionControl.setPrefix(""),$("a.leaflet-bar-part").text(""),CL.page.isMobile&&(P.fullscreen(),w())}o&&h&&n>0&&setTimeout(function(){v.map.fitBounds(h,{animate:!1})},0),v.map.addLayer(v.markers),j.removeClass("loading"),v.map.on("popupopen",function(a){a.popup===v.openPopup&&(a.popup._close(1),v.openPopup=void 0)}).on("popupclose",function(){v.openPopup=void 0}).on("enterFullscreen",function(){w()}).on("exitFullscreen",function(){w()});var R=function(){var a=v.map.getBounds().toBBoxString();CL.cookies.setItem("cl_map",a,{path:"/"})};v.map.on("moveend",R),v.map.on("zoomend",R),$("#subAbb").on("change",function(){CL.cookies.removeItem("cl_map",{path:"/"})});var S=function(a){var b=a.latlng,c=v.map.getZoom(),d=v.map.getBoundsZoom(a.layer.getConvexHull()),e=c+Math.round((d-c)/2);v.map.setView(b,e)};v.markers.on("clusterclick",S),CL.maps.ready.resolve(v.map)})})};CL.extend("maps",{init:function(){c=$("#popuptemplate").html().trim(),d=$("#clustertemplate").html().trim(),e=$("#postingtemplate").html().trim(),f=$(c),g=f.find("#clusterbubble"),h=f.find("#postbubble"),f.on("click",function(a){a.stopPropagation()}),$(window).on("resize",function(){CL.lightbox.center()}),$(document).on("keydown",function(a){a.shiftKey&&j.addClass("xhair")}).on("keyup",function(a){a.shiftKey||j.removeClass("xhair")}),L.Icon.Default.imagePath="//www.craigslist.org/images/map",v.tilelayer=new L.TileLayer(v.clMapsUrl,{subdomains:"0123456789",setView:!0,enableHighAccuracy:!0,attribution:'&copy; craigslist - Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> - <a href="https://forums.craigslist.org/?forumID=3132">Report a problem</a>'});var a=["jsonsearch",window.catAbb];window.subarea&&a.push(window.subarea),a.push(window.location.search);var b="/"+a.join("/");z(b),CL.maps.init=CL.util.noop},ready:new $.Deferred,zoomToPosting:function(a){this.ready.done(function(b){var c=y[a];c&&b&&(b.setView(c.getLatLng(),17,{animate:!1}),c.fireEvent("click"))})}})}(),function(){var a=$("body");if(a.hasClass("toc")){var b=$("#searchform"),c=$("#catAbb"),d=$("#query");!function(){var a=function(a,b){b?a.renameAttr("data-name","name"):a.renameAttr("name","data-name")};b.on("submit",function(){c.val()===window.catAbb?a(c,!1):c.attr("data-name")&&a(c,!0),b.find("input, select").not(c).each(function(){var b=$(this);a(b,""!==b.val())})})}(),function(){var a=CL.url.params(),c=b.find("input, select");delete a.s,Object.keys(a).some(function(a){return a&&0===c.filter("[name="+a+"]").length?(b.submit(),!0):void 0})}();var e={},f=0,g="changed_input",h=g+" clickme",i=$("#searchbtn"),j=function(a,b,c,d){a!==Boolean(e[b])&&(c.toggleClass(g,a),e[b]=!e[b],f+=a?1:-1,i.toggleClass(h,!!f),d&&d(b,a))},k=function(a,b,c,d){var e,f=$(a),g=f[0].type,h=f.attr(b?"id":"name");"undefined"==typeof c||"undefined"==typeof c[h]?(e="checkbox"===g?f.prop("checked"):"radio"===g?b?$("input[id="+f.attr("id")+"]:checked").val():$("input[name="+f.attr("name")+"]:checked").val():f.val(),c&&(c[h]=e)):e=c[h],f.on("change keyup",function(a,b,c,d){if("checkbox"===g)return function(){j(a.prop("checked")!=c,b,a.parent(),d)};if("radio"===g){var e=$("input[name="+a.attr("name")+"]");return function(){j(e.filter(":checked").val()!==c,b,e.parent(),d)}}return function(e,f){j(a.val()!==c,b,f||a,d)}}(f,h,e,d))};b.find("select, input").each(function(){k(this,!1)}),$(".submit_on_change").on("change",function(){$(this).closest("form").submit()});var l=function(a){c.val(a),b.submit()};!function(){var a=$("<select />").attr({id:"catAbbUI"}).append(c.find("option").clone()),b=c.find("option:selected").data("acat");b&&a.val(b),a.find("option[data-acat]").remove().end().insertAfter(c.hide()).on("change",function(){$("#excats").val(""),l(a.find("option:selected").val())})}();var m=function(a,b){var c=a.indexOf(":");return window.imageHost+"/"+a.substr(c+1)+"_"+b+".jpg"},n=function(){var a=$("#floater"),b=a.find("img.payload"),c=!1;CL.page.isMobile||$(".i").on("mouseover",function(){var d=$(this).data("id");d&&(a.show(),b.attr("src",m(d,"300x300")).on("load",function(){$("#floater").addClass("f")}),c=!0)}).on("mouseout",function(){a.hide().removeClass("f"),b.attr("src",""),c=!1}).on("mousemove",function(a){c&&$("#floater").css({left:a.pageX+15+"px",top:a.pageY+15+"px"})})},o=function(){$(".i").off(),$("#floater").hide()},p=function(){$("p.row .i").not("[data-id]").not(".empty").addClass("empty").attr("title","no image")},q=$("#map"),r=function(){var a=Math.round($("footer").offset().top-q.offset().top-10);q.height(a),CL.maps.map&&CL.maps.map.invalidateSize()},s=function(){$("span#hoodcount").text($("#nh :checked").length||$("#nh :selected").length||"all")},t=function(){$("#hoodtogon, #hoodtogoff").toggle(),$("#nh").slideToggle(100),$("select#nh").toChecklist({addScrollBar:!1,showSelectedItems:!0,submitDataAsArray:!1}),$("#nh").on("click",s),s()},u=[],v=[],w={},x={};$(".multipicker").each(function(){var a=$(this),b=a.find("select").attr("name"),c=v.length;a.attr("id","picker_"+c),v[c]=function(){w[b]||(w[b]={_picker:b});var a=$("button#"+b+"_title"),d=$("span#"+b+"_count");$("#picker_"+c+" input").each(function(){k(this,!0,w[b],function(c,d){"undefined"==typeof x[b]&&(x[b]=0),x[b]+=d?1:-1,0===x[b]?a.removeClass("changed_input"):a.hasClass("changed_input")||a.addClass("changed_input")})});var e;$("#"+b+" :checked").length||$("#"+b+" :selected").length?a.hasClass("multi_pick_picked")||(a.addClass("multi_pick_picked"),e=d.text().replace(/ \&nbsp;$/," *"),d.empty().append(e)):(e=d.text().replace(/ \*$/," &nbsp;"),a.removeClass("multi_pick_picked"),d.empty().append(e))},u[c]=function(){var a=$("#"+b);$("#"+b+"_togon, #"+b+"_togoff").toggle(),a.slideToggle(100),$("select#"+b).toChecklist({addScrollBar:!1,showSelectedItems:!0,submitDataAsArray:!1}),a.on("click",v[c]),v[c]()}});var y={},z=function(a,b){var c,d="cl_tocmode";if("undefined"==typeof a)return c=CL.cookies.getItem(d),c&&(c.split(",").forEach(function(a){a=a.split(":"),1===a.length?y[window.catType]=a[0]:y[a[0]]=a[1]}),c=y[window.catType]),c="show"===c?"pic":c,c||("sss"===window.catType&&"waa"!==window.catAbb&&"wad"!==window.catAbb&&"wan"!==window.catAbb||"hhh"===window.catType&&"swp"!==window.catAbb&&"hsw"!==window.catAbb&&"prk"!==window.catAbb&&"roo"!==window.catAbb&&"sha"!==window.catAbb?CL.page.isMobile?"pic":"grid":CL.page.isMobile?"pic":"list");var e=new Date;b=b||e.getTime(),e.setTime(b+31536e6),y[window.catType]=a;var f=Object.keys(y).map(function(a){return a+":"+y[a]}).join(",");CL.cookies.removeItem(d,{path:"/"}),CL.cookies.setItem(d,f,{expires:e,path:"/",domain:CL.url.baseDomain})},A=function(a){a=a||"50x50c",$(".i").each(function(){var b=$(this).data("id");b&&$(this).find("img").remove().end().append('<img alt="" src="'+m(b,a)+'">')})},B=z(),C=$(".toc_legend a.mode"),D=function(b){var c=function(a){$("div.sortby").css(a?{visibility:"hidden"}:{visibility:"visible"})},d={list:function(){c(!1)},pic:function(){n(),A("50x50c"),p(),c(!1)},grid:function(){o(),A("300x300"),p(),c(!1)},map:function(){CL.maps.init(),c(!0),r()}};d[b]&&(C.removeClass("sel").filter("#"+'list'+"view").addClass("sel"),a.removeClass(Object.keys(d).join(" ")).addClass(b),z(b),d[b](),B=b)};C.on("click",function(a){var b=$(this).data("view");CL.browser.hashChange||a.preventDefault(),b!==B&&D(b)});var E="",F=(location.hash||"").replace("#","");F?B=F:E=B,CL.browser.hashChange&&$(window).on("hashchange",function(){var a=(location.hash||"").replace("#","");!a&&E&&(a=E),a!==B&&D(a)}),D(B),function(){var b=$(".totalcount"),c=$('<div id="narrowsearch"></div>').on("mousedown touchstart",function(a){a.stopPropagation()}),d=$("#searchfieldset, #subAbb, .catfilterbox .center"),e=!1,f=function(d){return e?void c.show():($('<iframe src="'+b.attr("href")+'"></iframe>').hide().on("load",function(){var b=$(this.contentDocument||this.contentWindow.document);c.append(b.find("#postingbody").html()).appendTo(a).offset({left:d.left-c.outerWidth()/2,top:d.top}).spotlight()}).appendTo(a),void(e=!0))};b.on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this),e=b.offset(),g=b.width(),h=b.height();f({top:e.top+h,left:e.left+g/2}),d.spotlight({onEnd:function(){c.hide()}})})}();var G=b.find("#searchtable").find("input, select"),H=function(){var a=!1;return G.each(function(b,c){var d=$(c),e=d.val();return e!==CL.url.param(d.attr("name"))&&e!==d.attr("placeholder")?(a=!0,!1):void 0}),a};if($(".savesearch a.saveme").on("click",function(a){H()&&(a.preventDefault(),b.append('<input type="hidden" name="save" value="1">').submit())}),$.fn.DefaultValue&&!CL.browser.placeholder){var I=$("input.min"),J=$("input.max");I.DefaultValue(I.attr("placeholder")),J.DefaultValue(J.attr("placeholder")),d.DefaultValue(d.attr("placeholder"))}$("#catAbb").on("change",function(){b.submit()}),$("#nh").hide().removeAttr("disabled");var K=$("#nh").clone();K.find("#all").remove(),$("#nh").replaceWith(K),$("#hoodtogon, #hoodtitle").show(),$("#hoodtitle").on("click",function(){t()}),s(),a.on("click",function(a){$(a.target).parents("#hoodpicker").length||($("#hoodtogon").show(),$("#hoodtogoff").hide(),$("#nh").slideUp(100))}),$(".multipicker").each(function(){!function(b){var c=b.attr("id"),d=c.match(/picker_(.*)/)[1],e=$("#"+c+" select ").attr("name");$("#"+e).hide().removeAttr("disabled");var f=$("#"+e).clone();f.find("#all").remove(),$("#"+e).replaceWith(f),$("#"+e+"_togon, #"+e+"_title").show(),$("#"+e+"_title").on("click",function(){u[d]()}),v[d](),a.on("click",function(a){$(a.target).parents("#"+e+"_picker").length||($("#"+e+"_togon").show(),$("#"+e+"_togoff").hide(),$("#"+e).slideUp(100))})}($(this))}),$("a.gc,#searchlegend a").click(function(a){a.preventDefault(),l($(this).data("cat"))}),$("div.container").html()&&$("#toc_rows blockquote").first().hide(),$("span.itemsfound").prependTo("div.container"),$(".experimentalFeature a").on("click",function(a){var c=$(this).data("query");c&&(a.preventDefault(),d.val(c),b.submit())}),function(){var c=$(".catfilterbox"),e=c.find(".catfilter"),f=$(".catfilterlink"),g=c.find(".catdropdown"),h=e.find(".catrow"),i=c.find(".summary"),j=$("#excats"),k=!1,l=CL.url.param("excats");l=l?l.split("-"):[];var m=0;l=l.map(function(a){var b=parseInt(a,10)+m;return m=b,b});var n,o,p,q=l.length,r=Array.prototype.map.call(h,function(a){var b=$(a),c=String(b.data("ids")).split(",").map(parseFloat);return{$el:b,excluded:l.indexOf(c[0])>-1,ids:c}}),s=!0,t=0,u=function(){n=!1,o=[],p=null},v=function(a){var b=r[a],c=b.$el;s!==b.excluded&&(c.toggleClass("ex in"),b.excluded=!b.excluded,q=s?q+1:q-1),c.addClass("ip"),d.trigger("change")},w=function(a){var b=a>t;h.each(function(c){o[c]||(b?c>t&&a>=c&&(o[c]=!0,v(c)):t>c&&c>=a&&(o[c]=!0,v(c)))})},x=function(a){n=!0,t=h.index(a),v(t)},y=function(){h.removeClass("ip"),u();var a=[];r.forEach(function(b){b.excluded&&a.push.apply(a,b.ids)});var b=0;a=a.sort(function(a,b){return a-b}).map(function(a){var c=a-b;return b=a,c}),j.val(a.join("-")).trigger("change",[i])};u(),e.on("mousedown touchstart",".catrow",function(a){3!==a.which&&(a.preventDefault(),s=$(this).hasClass("in"),x(this),p=$(this))}),e.on("mouseup touchend",".catrow",y),e.on("touchmove",".catrow",function(a){var b,c=a.originalEvent.layerY,d=r.length;if(0>c)return w(0),void y();if(c>r[d-1].top)return w(d-1),void y();for(var e=0;d>e;e++){var f=r[e];if(!(c>=f.top))break;b=f.$el}p!==b&&(b.trigger("mouseenter"),p=b)}),e.on("mouseenter",".catrow",function(){n&&w(h.index(this))}),e.on("mousedown",function(a){a.preventDefault()}),e.on("mouseleave",function(a){if(n){var b=$(this),c=b.offset().top,d=c+b.outerHeight();a.pageY<=c?w(0):a.pageY>=d&&w(r.length-1),y()}}),f.on("click",function(a){a.stopPropagation(),k=!k,g.toggle(k),r=r.map(function(a){return a.top=a.$el.position().top,a})}),a.on("click",function(a){k&&(g.is(a.target)||g.find(a.target).length||(a.stopPropagation(),k=!1,g.toggle(k)))}),$(".advanced").click(function(){var a,c,d,e=$(this),f=$("#excats"),g=f.val(),h=[];if(g){d=f.val().split("-").map(Number);var i=d[0];for(h.push(i),a=1;a<d.length;a++)h.push(d[a]+h[a-1])}var j,k=e.attr("id");j="othercats"==k?$("#othercats_prev").val().split("-").map(function(a){return 1*a}):k.replace(/^adv_search_/,"").split("-").map(function(a){return 1*a});var l=j.join(",");if(e.prop("checked")){var m=[];for(a=0;a<j.length;a++)for(c=0;c<h.length;c++)j[a]==h[c]&&m.push(c);var n=m.sort(function(a,b){return b-a});for(a=0;a<n.length;a++)h.splice(n[a],1)}else for(a=0;a<j.length;a++)h.push(j[a]);if($(".catrow").each(function(a,b){var c=$(b);if(l==c.attr("data-ids")){var d=r[a];d.excluded=!d.excluded,c.toggleClass("ex in")}}),h.length>0){var o=h.sort(function(a,b){return a-b});for(d=[o[0]],a=1;a<o.length;a++)d.push(o[a]-o[a-1]);f.val(d.join("-"))}else f.val("");$("#remove_cat").val(j.join("-")),b.submit()})}();var L=[],M={},N=document.location.href.replace(/^https?:../,""),O=N.replace(/^([^\/]*)\/.*/,"$1");$(".hdrlnk").each(function(a,b){var c=$(b),d=c.data("id"),e=c.attr("href");e="/"==e[0]?"http://"+O+e:e,L[a]=[d,e],M[d]=a,a++}),CL.when.localStorageAvailable.done(function(a){try{var b=a.getItem("searches");b?(b=JSON.parse(b),Object.keys(b).length>100&&(b={})):b={};var c=N.match(N.match(/index(\d+)?.html/)?/index(\d+)?.html/:/[&?]s=(\d+)/),d=c&&2==c.length&&"undefined"!=typeof c[1]?c[1]:"0";N.match(/\/search\//)?(N=N.match(/[&?]s=\d*/)?N.replace(/([&?]s=)\d*/,"$10"):N.match(/\?/)?N+"&s=0":N+"?s=0",N=N.replace(/(\#[^\?\&]*)(.*)/,"$2$1")):N=N.match(/index\d*.html/)?N.replace(/index\d*.html/,"index.html"):N.replace(/([#\?].*|$)/,"/index.html$1").replace(/\/+\/index.html/,"/index.html");var e=b[N],f=e?e.header_list:[],g=e?e.id2headeridx:{},h=e?e.pag_table:{};h[d]=L.length;for(var i in M)g[i]=1*d+1*M[i];for(var j=0;j<L.length;j++)f[j+1*d]=L[j];b[N]={id2headeridx:g,header_list:f,pag_table:h,s:d},a.setItem("searches",JSON.stringify(b)),a.setItem("srch",N),$("a").click(function(){a.setItem("srch",N)})}catch(k){}}),$(".backtotop").on("click",function(a){a.preventDefault(),$(window).scrollTop(0)}),function(a,b){var c=0,d=$(a),e=Math.max;d.each(function(){var a=$(this).width();c=e(c,a)}),c+=b,d.css("min-width",c)}(".event_attr_label",7),function(){a.on("click",".row",function(){if(CL.page.isMobile){var a=$(this).find(".pl a").attr("href");a&&(window.location.href=a)}})}()}}();
/* {"sources":{"tocs-concat.js":"c0746f6a146f05eed819e75d2396d671"}} */
